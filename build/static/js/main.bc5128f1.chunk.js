(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{114:function(e,a){},116:function(e,a){},130:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(9),l=t.n(c),i=(t(91),t(30)),o=t(170),s=t(165),m=t(162),u=t(164),d=t(158),p=t(25),f=t(78),b=t(56),g=t.n(b),E=Object(n.createContext)(),v=Object(f.a)("https://teejay-video-chat.herokuapp.com/"),x=function(e){var a=e.children,t=Object(n.useState)(null),c=Object(p.a)(t,2),l=c[0],i=c[1],o=Object(n.useState)(""),s=Object(p.a)(o,2),m=s[0],u=s[1],d=Object(n.useState)({}),f=Object(p.a)(d,2),b=f[0],x=f[1],j=Object(n.useState)(!1),O=Object(p.a)(j,2),h=O[0],w=O[1],C=Object(n.useState)(!1),y=Object(p.a)(C,2),N=y[0],k=y[1],I=Object(n.useState)(""),S=Object(p.a)(I,2),D=S[0],A=S[1],B=Object(n.useRef)(),R=Object(n.useRef)(),V=Object(n.useRef)();Object(n.useEffect)(function(){navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then(function(e){i(e),B.current.srcObject=e}),v.on("me",function(e){return u(e)}),v.on("calluser",function(e){var a=e.from,t=e.name,n=e.signal;x({isReceivedCall:!0,from:a,name:t,signal:n})})},[]);return r.a.createElement(E.Provider,{value:{call:b,callAccepted:h,myVideo:B,userVideo:R,stream:l,name:D,setName:A,callEnded:N,me:m,callUser:function(e){var a=new g.a({initiator:!0,trickle:!1,stream:l});a.on("signal",function(a){v.emit("calluser",{userToCall:e,signalData:a,from:m,name:D})}),a.on("stream",function(e){R.current.srcObject=e}),v.on("callaccepted",function(e){w(!0),a.signal(e)}),V.current=a},leaveCall:function(){k(!0),V.current.destroy(),window.location.reload()},answerCall:function(){w(!0);var e=new g.a({initiator:!1,trickle:!1,stream:l});e.on("signal",function(e){v.emit("answercall",{signal:e,to:b.from})}),e.on("stream",function(e){R.current.srcObject=e}),e.signal(b.signal),V.current=e}}},a)},j=Object(d.a)(function(e){return{video:Object(i.a)({height:"200px"},e.breakpoints.down("xs"),{width:"300px"}),gridContainer:Object(i.a)({justifyContent:"center"},e.breakpoints.down("xs"),{flexDirection:"column"}),paper:{height:"50%",padding:"10px",border:"2px solid black",margin:"10px"}}}),O=function(){var e=Object(n.useContext)(E),a=e.name,t=e.callAccepted,c=e.myVideo,l=e.userVideo,i=e.callEnded,o=e.stream,d=e.call,p=j();return r.a.createElement(m.a,{container:!0,className:p.gridContainer},o&&r.a.createElement(u.a,{className:p.paper},r.a.createElement(m.a,{item:!0,xs:12,md:6},r.a.createElement(s.a,{variant:"h5",gutterBottom:!0}," ",a||"Name"," "),r.a.createElement("video",{playsInline:!0,muted:!0,ref:c,autoPlay:!0,className:p.video}))),t&&!i&&r.a.createElement(u.a,{className:p.paper},r.a.createElement(m.a,{item:!0,xs:12,md:6},r.a.createElement(s.a,{variant:"h5",gutterBottom:!0}," ",d.name||"Name"," "),r.a.createElement("video",{playsInline:!0,ref:l,autoPlay:!0,className:p.video}))))},h=t(166),w=t(171),C=t(173),y=t(77),N=t(167),k=t(168),I=t(169),S=Object(d.a)(function(e){return{root:{display:"flex",flexDirection:"column"},gridContainer:Object(i.a)({width:"100%"},e.breakpoints.down("xs"),{flexDirection:"column"}),container:Object(i.a)({width:"600px",margin:"35px 0",padding:0},e.breakpoints.down("xs"),{width:"80%"}),margin:{marginTop:20},padding:{padding:20},paper:{padding:"10px 20px",border:"2px solid black"}}}),D=function(e){var a=e.children,t=Object(n.useContext)(E),c=t.me,l=t.callAccepted,i=t.name,o=t.setName,d=t.callEnded,f=t.leaveCall,b=t.callUser,g=Object(n.useState)(""),v=Object(p.a)(g,2),x=v[0],j=v[1],O=S();return r.a.createElement(h.a,{className:O.container},r.a.createElement(u.a,{elevation:10,className:O.paper},r.a.createElement("form",{className:O.root,noValidate:!0,autoComplete:"off"},r.a.createElement(m.a,{container:!0,className:O.gridContainer},r.a.createElement(m.a,{item:!0,xs:12,md:6,className:O.padding},r.a.createElement(s.a,{gutterBottom:!0,variant:"h6"},"Account Info"),r.a.createElement(w.a,{label:"Name",value:i,onChange:function(e){return o(e.target.value)},fullWidth:!0}),r.a.createElement(y.CopyToClipboard,{text:c,className:O.margin},r.a.createElement(C.a,{variant:"contained",color:"primary",fullWidth:!0,startIcon:r.a.createElement(N.a,{fontSize:"large"})},"Copy Your ID"))),r.a.createElement(m.a,{item:!0,xs:12,md:6,className:O.padding},r.a.createElement(s.a,{gutterBottom:!0,variant:"h6"},"Make a call"),r.a.createElement(w.a,{label:"ID to Call",value:x,onChange:function(e){return j(e.target.value)},fullWidth:!0}),l&&!d?r.a.createElement(C.a,{variant:"contained",color:"secondary",fullWidth:!0,startIcon:r.a.createElement(k.a,{fontSize:"large"}),onClick:f,className:O.margin},"Hang Up"):r.a.createElement(C.a,{variant:"contained",color:"primary",fullWidth:!0,startIcon:r.a.createElement(I.a,{fontSize:"large"}),onClick:function(){return b(x)},className:O.margin},"Call")))),a))},A=function(){var e=Object(n.useContext)(E),a=e.answerCall,t=e.call,c=e.callAccepted;return r.a.createElement(r.a.Fragment,null,t.isReceivedCall&&!c&&r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},r.a.createElement("h1",null,t.name," is calling"),r.a.createElement(C.a,{variant:"contained",color:"primary",onClick:a},"Answer")))},B=Object(d.a)(function(e){return{appBar:Object(i.a)({borderRadius:15,margin:"30px 100px",display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",width:"600px",border:"2px solid black"},e.breakpoints.down("xs"),{width:"90px"}),image:{marginLeft:"15px"},wrapper:{display:"flex",flexDirection:"column",alignItems:"center",width:"100%"}}});var R=function(){var e=B();return r.a.createElement("div",{className:e.wrapper},r.a.createElement(o.a,{className:e.appBar,position:"static",color:"inherit"},r.a.createElement(s.a,{variant:"h4",align:"center"},"Teejay Video App")),r.a.createElement(O,null),r.a.createElement(D,null,r.a.createElement(A,null)))};l.a.render(r.a.createElement(x,null,r.a.createElement(R,null)),document.getElementById("root"))},84:function(e,a,t){e.exports=t(130)},91:function(e,a,t){}},[[84,2,1]]]);
//# sourceMappingURL=main.bc5128f1.chunk.js.map